<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="./slr-dialog.html">

<dom-module id="slr-product-group-view">
  <template>
    <style include="common-styles">
      :host {
        display: block;
        @apply --slr-content;
        text-align: left;
      }

      paper-dialog {
        max-width: var(--app-content-max-width);
        min-width: 500px;
      }
    </style>

    <slr-dialog title="Product Group"
                    item={{item}}
                    method="post"
                    action="/product-groups"
                    opened={{opened}}
                    edit-mode={{editMode}}>
      <div slot="actions">
        <paper-button hidden$="{{!editMode}}" on-click="submit" autofocus>Save</paper-button>
      </div>

      <iron-form id="form">
        <form class="form" method="post" action="/product-groups">
          <paper-input  name="name"
                        type="text"
                        label="Name" always-float-label
                        disabled={{!editMode}}
                        value="{{item.name}}"></paper-input>
          <paper-input  name="department"
                        type="text"
                        label="Department" always-float-label
                        disabled={{!editMode}}
                        value="{{item.department}}"></paper-input>
        </form>
      </iron-form>
    </slr-dialog>
  </template>
  <script>
    class SlrProductGroupView extends Polymer.Element {
      static get is() { return 'slr-product-group-view' }

      static get properties() {
        return {
          item: {
            type: Object
          },
          opened: {
            type: Boolean,
            value: false,
            notify: true
          },
          loading: {
            type: Boolean,
            notify: true
          },
          editMode: {
            type: Boolean,
            value: false,
            notify: true
          }
        }
      }

      ready() {
        super.ready()
        this.$.form.addEventListener('iron-form-presubmit',
                                        () => { console.log('Form submitted:', this.$.form.serializeForm())})
      }
      submit() {
        this.$.form.submit()
        this.set('editMode', false)
      }
    }

    window.customElements.define(SlrProductGroupView.is, SlrProductGroupView)
  </script>
</dom-module>
